function dropzoneFile() {
    Dropzone.options.uploadFile = {
        maxFiles: 1,
        paramName: "file",
        maxFilesize: 20,
        uploadMultiple: false,
        acceptedFiles: ".pdf",
        init: function() {
            this.on("success", function(file, response) {
                docFiles();
            })
        }
    };
}
$('#fileUpload').on('shown.bs.modal', function() {
    dropzoneFile();
    docFiles();
});


function docFiles() {
    $('#document-gallery').empty();
    $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': jQuery('meta[name="csrf-token"]').attr('content')
        }
    });
    $.ajax({
        type: 'GET',
        url: docsUrl,
        dataType: 'JSON',
        success: function(response) {
            response[0].forEach(function(key){
                $('#document-gallery').append("<div class='col-md-* p-1'> <button class='select-doc p-1 btn btn-outline-info' data-docs='"+key.document+"' data-media='"+key.doc_id+"' data-bs-dismiss='modal' aria-label='Close'><img src='http://127.0.0.1:8000/backend/img/29587.png' /><h5>"+key.document+"</h5></button></div>");
            });
        }
    });
}


$(document).on("click", "a.document-btn", function() {
    if($(this).data('pdf') == 'infodocs') {
        $('#fileType').val('infodocs');
    }
    if($(this).data('pdf') == 'guidelines') {
        $('#fileType').val('guidelines');
    }
    if($(this).data('pdf') == 'notices') {
        $('#fileType').val('notices');
    }
});

$(document).on("click", "button.select-doc", function() {
    if( $('#fileType').val() == 'infodocs') {
        $('#infoDocument').val($(this).data('docs'));
        $('#infoDocument_id').val($(this).data('media'));
    }
    if( $('#fileType').val() == 'guidelines') {
        $('#guideDocument').val($(this).data('docs'));
        $('#guideDocument_id').val($(this).data('media'));
    }
    if( $('#fileType').val() == 'notices') {
        $('#noticeDocument').val($(this).data('docs'));
        $('#noticeDocument_id').val($(this).data('media'));
    }
});
